# Final Project: COVID-19 Case Dynamics Before and After Vaccination


## Project Goal
This project analyzes how COVID-19 case trends and mortality rates changed before and after vaccination campaigns. The analysis compares three countries representing regional differences in Asia, Europe, and the United States.

The project demonstrates:
- Data loading and cleaning
- Data analysis
- Descriptive statistical analysis
- Visualization of trends
- Interpretation of results

---

## Core Research Question
How did COVID-19 case trends and mortality rates change after vaccination campaigns started in different countries?

---

## Data Sources
The analysis uses publicly available COVID-19 data from Our World in Data (https://ourworldindata.org/covid-cases)

The dataset includes:
- COVID-19 case counts
- COVID-19 death counts
- Vaccination statistics
- Population data

The data is loaded directly from a public URL using pandas.

---

## Project Structure
- main.py - runs the full analysis pipeline
- data_loader.py - loads the dataset
- cleaning.py - cleans the data and filters selected countries
- analysis.py - defines vaccination periods, summary tables, and statistical tests
- visualization.py - creates charts and visualizations
- covid_data/ - stores generated CSV files
- visualizations/ - stores generated PNG files
- sample_cleaned_data.csv - small sample of the cleaned dataset for reproducibility and quick inspection
- tests/ - tests data loading and structure, vaccination period split logic
- tests/conftest.py - configures Python path so project modules can be imported in tests

---

## Data Loading & Preparation
The dataset is loaded using **pandas**.

Data preparation includes:
- Handling missing values
- Converting the `date` column to datetime format
- Filtering relevant columns:
  - `date`
  - `location` (country)
  - `new_cases`
  - `new_deaths`
  - `people_vaccinated`
  - `people_fully_vaccinated`
- Selecting three countries for analysis:
  - Japan
  - Germany
  - United States

---

### Missing Value Handling
- Missing vaccination values are treated as zero when identifying vaccination start dates.
- Rows are not dropped due to missing case or death values.
- Aggregations such as averages are computed using pandas, which automatically ignores missing values.

---

## Define Analysis Periods
For each country, a vaccination start date is identified based on the first day with recorded vaccinations.

The dataset is then split into:
- **Pre-vaccination period**
- **Post-vaccination period**

This logic is applied independently for each country.

---

## Data Analysis
The analysis computes:
- Average daily new COVID-19 cases before and after vaccination
- Average daily new COVID-19 deaths before and after vaccination
- Percentage change between pre- and post-vaccination periods

The implementation uses pandas `groupby` operations and aggregation functions such as `mean()` and `min()` to summarize data by country and vaccination period. Reusable helper functions are implemented for data cleaning, analysis, and visualization to keep the code modular and easy to maintain.

---

## Statistical Testing (Exploratory)
A simple two-sample t-test is applied to compare pre- and post-vaccination periods for each country.
- The test is run separately for:
    - `new_cases`
    - `new_deaths`
- Welch’s t-test (equal_var=False) is used
- Results are stored in CSV files for transparency

### P-value Summary
New COVID-19 Cases:
- Germany: p ≈ 3.0e-10
- Japan: p ≈ 1.8e-10
- United States: p ≈ 0.00036

New COVID-19 Deaths:
- Germany: p ≈ 0.45
- Japan: p ≈ 0.001
- United States: p ≈ 0.32

These results suggest that:
- Changes in reported case counts are statistically distinguishable pre vs post vaccination
- Changes in reported deaths are less consistent across countries

These tests are exploratory and do not imply causation.

---

## Visualization
The following charts are generated using **matplotlib**:


### Line Charts
- Daily new COVID-19 cases per country
- Weekly (7-day rolling average) new COVID-19 cases per country
- Vaccination start dates highlighted with vertical dashed lines


### Bar Charts
- Comparison of average daily new cases before vs after vaccination
- Comparison of average daily new deaths before vs after vaccination

All charts include:
- Titles
- Labeled axes
- Legends (where applicable)

Charts are saved in the `visualizations/` directory.

---

### Visualization Notes
- **Daily new cases chart** shows reported daily COVID-19 cases over time for each selected country.  
  The vertical dashed line indicates the start of vaccination campaigns.
- **Weekly new cases chart** presents a 7-day rolling average to smooth daily fluctuations and highlight trends.
- **Bar charts** compare average daily new cases and deaths before and after vaccination campaigns.
- Charts are saved as PNG files; vector formats (SVG) can also be generated by adjusting the save format in the visualization module.

---

## How to Run the Project
### 1.Create and activate a virtual environment
```bash
python3 -m venv .venv
source .venv/bin/activate  
```
### 2.Install required libraries
```bash
pip install -r requirements.txt
```
### 3.Run the full analysis
```bash
python main.py
```
### 4.Generated outputs
After running the script:
- Cleaned datasets will be saved in `covid_data/`
- Summary tables will be saved as CSV files
- Charts will be automatically generated and saved in `visualizations/`

---

## Notes on Dependencies
- Project metadata and dependencies are also declared in `pyproject.toml`
- `requirements.txt` is provided for simple and explicit installation on a fresh machine
- Both files describe the same dependencies and are kept consistent

---

## Code Quality
- All public functions include docstrings and type hints.
- Function and variable naming follows Python `snake_case` conventions.
- Optional linting was performed using **ruff** to identify unused imports and minor style issues.

---

## Testing
A minimal automated test suite is included using **pytest**.

The tests are intentionally small and focused:
- One test validates that data loading produces a DataFrame with expected structure
- One test verifies that vaccination periods are correctly split into pre- and post-vaccination using a fabricated example dataset
- A `conftest.py` file is used to ensure project modules are discoverable by pytest during test execution.


These tests are designed to validate core logic only and are not intended to provide exhaustive coverage.

### Running Tests
```bash
pytest
```

---

## Results
The analysis shows that for all selected countries:
- Average daily new COVID-19 cases increased after vaccination campaigns began
- The increase in reported cases varied by country
- Average daily new deaths showed smaller increases compared to case counts

These results suggest that while infections continued after vaccination campaigns started, vaccinations may have contributed to limiting severe outcomes.

The analysis is descriptive and does not establish cause-and-effect relationships.

